version: '3.8'

# DeLab Multi-Tier Deployment
# Usage: docker-compose up [tier-1|tier-2|tier-3]

services:
  # Tier 1: Edge Container (Minimal)
  tier-1-edge:
    build:
      context: .
      dockerfile: docker/Dockerfile
    image: delab:tier-1-edge
    container_name: delab-edge
    ports:
      - "8889:8888"
    environment:
      - JUPYTER_TOKEN=${JUPYTER_TOKEN:-delab2025}
    volumes:
      - ${DATA_DIR:-./data}:/home/delab/data
      - ${WORK_DIR:-./work}:/home/delab/work
    networks:
      - delab-net
    restart: unless-stopped
    profiles:
      - edge
      - tier1
networks:
  delab-net:
    driver: bridge