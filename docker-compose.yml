# latlab Multi-Tier Deployment
# Usage: docker-compose up [tier-1|tier-2|tier-3]

services:
  # Tier 1: Edge Container (Minimal)
  tier-1-edge:
    build:
      context: .
      dockerfile: docker/Dockerfile
    image: latlab:tier-1-edge
    container_name: latlab-edge
    ports:
      - "8889:8888"
    environment:
      - JUPYTER_TOKEN=${JUPYTER_TOKEN:-latlab2025}
    volumes:
      - ${DATA_DIR:-./data}:/home/latlab/data
      - ${WORK_DIR:-./work}:/home/latlab/work
    networks:
      - latlab-net
    restart: unless-stopped
    profiles:
      - edge
      - tier1
networks:
  latlab-net:
    driver: bridge