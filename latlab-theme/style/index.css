/*-----------------------------------------------------------------------------
| latlab Dark Theme for JupyterLab
|
| Follows the same pattern as the official JupyterLab Dark theme:
| define CSS variables only, with minimal cosmetic-only overrides.
| Do NOT override structural layout properties (padding, margin, min-height,
| width, etc.) — those are managed by JupyterLab's base CSS.
|----------------------------------------------------------------------------*/

:root {
  /* ── latlab Brand Colors (internal references) ── */
  --latlab-primary: #9B59B6;
  --latlab-primary-dark: #8E44AD;
  --latlab-primary-light: #BB8FCE;
  --latlab-accent: #E74C3C;
  --latlab-success: #27AE60;
  --latlab-warning: #F39C12;
  --latlab-info: #3498DB;
  --latlab-bg-primary: #1C1E26;
  --latlab-bg-secondary: #2D3142;
  --latlab-bg-tertiary: #3A3F51;
  --latlab-text-primary: #E8E9EB;
  --latlab-text-secondary: #BDC3C7;
  --latlab-text-muted: #95A5A6;
  --latlab-border: #4A5568;

  /* ── Elevation / Shadows ── */
  --jp-shadow-base-lightness: 32;
  --jp-shadow-umbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.2
  );
  --jp-shadow-penumbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.14
  );
  --jp-shadow-ambient-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.12
  );
  --jp-elevation-z0: none;
  --jp-elevation-z1: 0 2px 1px -1px var(--jp-shadow-umbra-color),
    0 1px 1px 0 var(--jp-shadow-penumbra-color),
    0 1px 3px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z2: 0 3px 1px -2px var(--jp-shadow-umbra-color),
    0 2px 2px 0 var(--jp-shadow-penumbra-color),
    0 1px 5px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z4: 0 2px 4px -1px var(--jp-shadow-umbra-color),
    0 4px 5px 0 var(--jp-shadow-penumbra-color),
    0 1px 10px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z6: 0 3px 5px -1px var(--jp-shadow-umbra-color),
    0 6px 10px 0 var(--jp-shadow-penumbra-color),
    0 1px 18px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z8: 0 5px 5px -3px var(--jp-shadow-umbra-color),
    0 8px 10px 1px var(--jp-shadow-penumbra-color),
    0 3px 14px 2px var(--jp-shadow-ambient-color);
  --jp-elevation-z12: 0 7px 8px -4px var(--jp-shadow-umbra-color),
    0 12px 17px 2px var(--jp-shadow-penumbra-color),
    0 5px 22px 4px var(--jp-shadow-ambient-color);
  --jp-elevation-z16: 0 8px 10px -5px var(--jp-shadow-umbra-color),
    0 16px 24px 2px var(--jp-shadow-penumbra-color),
    0 6px 30px 5px var(--jp-shadow-ambient-color);
  --jp-elevation-z20: 0 10px 13px -6px var(--jp-shadow-umbra-color),
    0 20px 31px 3px var(--jp-shadow-penumbra-color),
    0 8px 38px 7px var(--jp-shadow-ambient-color);
  --jp-elevation-z24: 0 11px 15px -7px var(--jp-shadow-umbra-color),
    0 24px 38px 3px var(--jp-shadow-penumbra-color),
    0 9px 46px 8px var(--jp-shadow-ambient-color);

  /* ── Borders ── */
  --jp-border-width: 1px;
  --jp-border-color0: var(--latlab-border);
  --jp-border-color1: var(--latlab-border);
  --jp-border-color2: var(--latlab-bg-tertiary);
  --jp-border-color3: var(--latlab-bg-secondary);
  --jp-inverse-border-color: #757575;
  --jp-border-radius: 2px;

  /* ── UI Fonts ── */
  --jp-ui-font-scale-factor: 1.2;
  --jp-ui-font-size0: 0.83333em;
  --jp-ui-font-size1: 13px;
  --jp-ui-font-size2: 1.2em;
  --jp-ui-font-size3: 1.44em;
  --jp-ui-font-family: system-ui, -apple-system, blinkmacsystemfont, 'Segoe UI',
    helvetica, arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol';

  /* UI font colors */
  --jp-ui-font-color0: rgba(255, 255, 255, 1);
  --jp-ui-font-color1: rgba(255, 255, 255, 0.87);
  --jp-ui-font-color2: rgba(255, 255, 255, 0.54);
  --jp-ui-font-color3: rgba(255, 255, 255, 0.38);
  --jp-ui-inverse-font-color0: rgba(0, 0, 0, 1);
  --jp-ui-inverse-font-color1: rgba(0, 0, 0, 0.8);
  --jp-ui-inverse-font-color2: rgba(0, 0, 0, 0.5);
  --jp-ui-inverse-font-color3: rgba(0, 0, 0, 0.3);

  /* ── Content Fonts ── */
  --jp-content-line-height: 1.6;
  --jp-content-font-scale-factor: 1.2;
  --jp-content-font-size0: 0.83333em;
  --jp-content-font-size1: 14px;
  --jp-content-font-size2: 1.2em;
  --jp-content-font-size3: 1.44em;
  --jp-content-font-size4: 1.728em;
  --jp-content-font-size5: 2.0736em;
  --jp-content-presentation-font-size1: 17px;
  --jp-content-heading-line-height: 1;
  --jp-content-heading-margin-top: 1.2em;
  --jp-content-heading-margin-bottom: 0.8em;
  --jp-content-heading-font-weight: 500;
  --jp-content-font-color0: rgba(255, 255, 255, 1);
  --jp-content-font-color1: rgba(255, 255, 255, 1);
  --jp-content-font-color2: rgba(255, 255, 255, 0.7);
  --jp-content-font-color3: rgba(255, 255, 255, 0.5);
  --jp-content-link-color: var(--latlab-info);
  --jp-content-link-visited-color: var(--latlab-primary-light);
  --jp-content-link-hover-color: #42a5f5;
  --jp-content-font-family: system-ui, -apple-system, blinkmacsystemfont,
    'Segoe UI', helvetica, arial, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol';

  /* ── Code Fonts ── */
  --jp-code-font-size: 13px;
  --jp-code-line-height: 1.3077;
  --jp-code-padding: 5px;
  --jp-code-font-family-default: menlo, consolas, 'DejaVu Sans Mono', monospace;
  --jp-code-font-family: var(--jp-code-font-family-default);
  --jp-code-presentation-font-size: 16px;
  --jp-code-cursor-width0: 1.4px;
  --jp-code-cursor-width1: 2px;
  --jp-code-cursor-width2: 4px;

  /* ── Layout Colors — latlab dark palette ── */
  --jp-layout-color0: var(--latlab-bg-primary);
  --jp-layout-color1: var(--latlab-bg-secondary);
  --jp-layout-color2: var(--latlab-bg-tertiary);
  --jp-layout-color3: var(--latlab-border);
  --jp-layout-color4: #757575;

  /* ── Inverse Layout ── */
  --jp-inverse-layout-color0: white;
  --jp-inverse-layout-color1: white;
  --jp-inverse-layout-color2: #eee;
  --jp-inverse-layout-color3: #bdbdbd;
  --jp-inverse-layout-color4: #757575;

  /* ── Brand / Accent — latlab purple instead of default blue ── */
  --jp-brand-color0: var(--latlab-primary-dark);
  --jp-brand-color1: var(--latlab-primary);
  --jp-brand-color2: var(--latlab-primary-light);
  --jp-brand-color3: #D7BDE2;
  --jp-brand-color4: #EBDEF0;
  --jp-accent-color0: #388e3c;
  --jp-accent-color1: #4caf50;
  --jp-accent-color2: #81c784;
  --jp-accent-color3: #c8e6c9;

  /* ── State Colors ── */
  --jp-warn-color0: #f57c00;
  --jp-warn-color1: #ff9800;
  --jp-warn-color2: #ffb74d;
  --jp-warn-color3: #ffe0b2;
  --jp-error-color0: #d32f2f;
  --jp-error-color1: #f44336;
  --jp-error-color2: #e57373;
  --jp-error-color3: #ffcdd2;
  --jp-success-color0: #388e3c;
  --jp-success-color1: #4caf50;
  --jp-success-color2: #81c784;
  --jp-success-color3: #c8e6c9;
  --jp-info-color0: #0097a7;
  --jp-info-color1: #00bcd4;
  --jp-info-color2: #4dd0e1;
  --jp-info-color3: #b2ebf2;

  /* ── Cell Styles ── */
  --jp-cell-padding: 5px;
  --jp-cell-collapser-width: 8px;
  --jp-cell-collapser-min-height: 20px;
  --jp-cell-collapser-not-active-hover-opacity: 0.6;
  --jp-cell-editor-background: var(--jp-layout-color1);
  --jp-cell-editor-border-color: var(--latlab-border);
  --jp-cell-editor-box-shadow: inset 0 0 2px var(--latlab-primary-light);
  --jp-cell-editor-active-background: var(--jp-layout-color0);
  --jp-cell-editor-active-border-color: var(--latlab-primary);
  --jp-cell-prompt-width: 64px;
  --jp-cell-prompt-font-family: var(--jp-code-font-family-default);
  --jp-cell-prompt-letter-spacing: 0;
  --jp-cell-prompt-opacity: 1;
  --jp-cell-prompt-not-active-opacity: 1;
  --jp-cell-prompt-not-active-font-color: #e0e0e0;
  --jp-cell-inprompt-font-color: var(--latlab-primary-light);
  --jp-cell-outprompt-font-color: #bf5b3d;

  /* ── Notebook ── */
  --jp-notebook-padding: 10px;
  --jp-notebook-select-background: var(--jp-layout-color1);
  --jp-notebook-multiselected-color: rgba(155, 89, 182, 0.24);
  --jp-notebook-scroll-padding: calc(
    100% - var(--jp-code-font-size) * var(--jp-code-line-height) -
      var(--jp-code-padding) - var(--jp-cell-padding) - 1px
  );

  /* ── Rendermime ── */
  --jp-rendermime-error-background: rgba(244, 67, 54, 0.28);
  --jp-rendermime-table-row-background: var(--latlab-bg-secondary);
  --jp-rendermime-table-row-hover-background: rgba(155, 89, 182, 0.2);

  /* ── Dialog ── */
  --jp-dialog-background: rgba(0, 0, 0, 0.6);

  /* ── Console ── */
  --jp-console-padding: 10px;

  /* ── Toolbar ── */
  --jp-toolbar-border-color: var(--jp-border-color2);
  --jp-toolbar-micro-height: 8px;
  --jp-toolbar-background: var(--jp-layout-color1);
  --jp-toolbar-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.8);
  --jp-toolbar-header-margin: 4px 4px 0 4px;
  --jp-toolbar-active-background: var(--jp-layout-color0);

  /* ── Statusbar ── */
  --jp-statusbar-height: 24px;

  /* ── Input Fields ── */
  --jp-input-box-shadow: inset 0 0 2px var(--latlab-primary-light);
  --jp-input-active-background: var(--jp-layout-color0);
  --jp-input-hover-background: var(--jp-layout-color2);
  --jp-input-background: var(--latlab-bg-tertiary);
  --jp-input-border-color: var(--jp-inverse-border-color);
  --jp-input-active-border-color: var(--latlab-primary);
  --jp-input-active-box-shadow-color: rgba(155, 89, 182, 0.3);

  /* ── Editor ── */
  --jp-editor-selected-background: var(--jp-layout-color2);
  --jp-editor-selected-focused-background: rgba(155, 89, 182, 0.24);
  --jp-editor-cursor-color: var(--jp-ui-font-color0);

  /* ── Code Mirror — latlab palette ── */
  --jp-mirror-editor-keyword-color: var(--latlab-primary-light);
  --jp-mirror-editor-atom-color: #64b5f6;
  --jp-mirror-editor-number-color: var(--latlab-warning);
  --jp-mirror-editor-def-color: var(--latlab-info);
  --jp-mirror-editor-variable-color: #e0e0e0;
  --jp-mirror-editor-variable-2-color: #2196f3;
  --jp-mirror-editor-variable-3-color: #43a047;
  --jp-mirror-editor-punctuation-color: #42a5f5;
  --jp-mirror-editor-property-color: #42a5f5;
  --jp-mirror-editor-operator-color: #d48fff;
  --jp-mirror-editor-comment-color: var(--latlab-text-muted);
  --jp-mirror-editor-string-color: var(--latlab-success);
  --jp-mirror-editor-string-2-color: var(--latlab-primary-light);
  --jp-mirror-editor-meta-color: #a2f;
  --jp-mirror-editor-qualifier-color: #555;
  --jp-mirror-editor-builtin-color: #43a047;
  --jp-mirror-editor-bracket-color: #997;
  --jp-mirror-editor-tag-color: #388e3c;
  --jp-mirror-editor-attribute-color: #1976d2;
  --jp-mirror-editor-header-color: #2196f3;
  --jp-mirror-editor-quote-color: #81c784;
  --jp-mirror-editor-link-color: #1976d2;
  --jp-mirror-editor-error-color: #f00;
  --jp-mirror-editor-hr-color: #999;

  /* ── Collaborator Colors ── */
  --jp-collaborator-color1: #ad4a00;
  --jp-collaborator-color2: #7b6a00;
  --jp-collaborator-color3: #007e00;
  --jp-collaborator-color4: #008772;
  --jp-collaborator-color5: #0079b9;
  --jp-collaborator-color6: #8b45c6;
  --jp-collaborator-color7: #be208b;

  /* ── Sidebar ── */
  --jp-sidebar-min-width: 250px;

  /* ── Vega ── */
  --jp-vega-background: #bdbdbd;

  /* ── Keyboard Shortcuts ── */
  --jp-shortcuts-button-background: var(--latlab-primary-light);
  --jp-shortcuts-button-hover-background: var(--latlab-primary);

  /* ── Switch ── */
  --jp-switch-color: #bdbdbd;
  --jp-switch-true-position-color: var(--latlab-primary);
}

/* ── Completer ── */
.jp-Completer {
  --jp-completer-type-background0: transparent;
  --jp-completer-type-background1: #1f77b4;
  --jp-completer-type-background2: #ff7f0e;
  --jp-completer-type-background3: #2ca02c;
  --jp-completer-type-background4: #d62728;
  --jp-completer-type-background5: #9467bd;
  --jp-completer-type-background6: #8c564b;
  --jp-completer-type-background7: #e377c2;
  --jp-completer-type-background8: #7f7f7f;
  --jp-completer-type-background9: #bcbd22;
  --jp-completer-type-background10: #17becf;
}

/* ── Monospace typography ── */
.jp-ThemedContainer tt,
.jp-ThemedContainer code,
.jp-ThemedContainer kbd,
.jp-ThemedContainer samp,
.jp-ThemedContainer pre {
  font-family: var(--jp-code-font-family);
  font-size: var(--jp-code-font-size);
  line-height: var(--jp-code-line-height);
}

/* ── Fix illegible yellow bg in exception stacktrace ── */
:where(
    .jp-RenderedText[data-mime-type='application/vnd.jupyter.stderr']
      pre
      .ansi-yellow-bg
  ) {
  color: black;
}

/*-----------------------------------------------------------------------------
| Minimal cosmetic-only overrides (colors only, no layout/sizing changes)
|----------------------------------------------------------------------------*/

/* Markdown heading accent color */
.jp-MarkdownOutput h1,
.jp-MarkdownOutput h2,
.jp-MarkdownOutput h3 {
  color: var(--latlab-primary-light);
}

/* Launcher card hover glow */
.jp-LauncherCard:hover {
  border-color: var(--latlab-primary);
  box-shadow: 0 4px 12px rgba(155, 89, 182, 0.3);
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--jp-layout-color1);
}

::-webkit-scrollbar-thumb {
  background: var(--latlab-border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--latlab-primary);
}

/* ── Custom Logo — Replace default Jupyter logo with latlab logo ── */
#jp-MainLogo svg,
#jp-MainLogo .jp-icon3 {
  display: none !important;
}

#jp-MainLogo {
  background-image: url('./latlab.svg');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}
